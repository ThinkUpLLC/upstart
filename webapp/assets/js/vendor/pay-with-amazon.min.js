(function outer(modules,cache,entries){var global=function(){return this}();function require(name,jumped){if(cache[name])return cache[name].exports;if(modules[name])return call(name,require);throw new Error('cannot find module "'+name+'"')}function call(id,require){var m=cache[id]={exports:{}};var mod=modules[id];var name=mod[2];var fn=mod[0];fn.call(m.exports,function(req){var dep=modules[id][1][req];return require(dep?dep:req)},m,m.exports,outer,modules,cache,entries);if(name)cache[name]=cache[id];return cache[id].exports}for(var id in entries){if(entries[id]){global[entries[id]]=require(id)}else{require(id)}}require.duo=true;require.cache=cache;require.modules=modules;return require})({1:[function(require,module,exports){"use strict";var Emitter=require("component/emitter");var bind=require("component/bind");module.exports=PayWithAmazon;function PayWithAmazon(opts){if(!(this instanceof PayWithAmazon))return new PayWithAmazon(opts);this.configure(opts);this.billingAgreementId=null;this.consent=undefined;this.widgets={};this._status=this.status();this.setBillingAgreementId=bind(this,this.setBillingAgreementId);this.initWallet=bind(this,this.initWallet);this.initConsent=bind(this,this.initConsent);this.setConsent=bind(this,this.setConsent);this.error=bind(this,this.error);this.init=bind(this,this.init);if("window.OffAmazonPayments"in window){this.init()}else{document.write('<script src="'+"https://static-na.payments-amazon.com/OffAmazonPayments/us"+(this.config.production?"":"/sandbox")+"/js/Widgets.js?sellerId="+this.config.sellerId+'"></script>');window.onAmazonLoginReady=this.init}return this}Emitter(PayWithAmazon.prototype);PayWithAmazon.prototype.version="1.0.3";PayWithAmazon.prototype.configure=function(opts){if(typeof opts!=="object")throw new Error("opts must be provided as an object.");if(!opts.sellerId)throw new Error("opts.sellerId is required.");if(!opts.clientId)throw new Error("opts.clientId is required.");if(!opts.button)throw new Error("opts.button is required.");if(!opts.wallet)throw new Error("opts.wallet is required.");if(!opts.consent)throw new Error("opts.consent is required.");if(typeof opts.button==="string")opts.button={id:opts.button};if(typeof opts.wallet==="string")opts.wallet={id:opts.wallet};if(typeof opts.consent==="string")opts.consent={id:opts.consent};if(typeof opts.addressBook==="string")opts.addressBook={id:opts.addressBook};opts.button.type=opts.button.type==="small"?"Pay":"PwA";opts.button.color=opts.button.color||"Gold";if(opts.wallet.width||opts.wallet.height){opts.wallet.dimensions={width:dimension(opts.wallet.width||400),height:dimension(opts.wallet.height||260)}}if(opts.consent.width||opts.consent.height){opts.consent.dimensions={width:dimension(opts.consent.width||400),height:dimension(opts.consent.height||140)}}if(opts.addressBook&&(opts.addressBook.width||opts.addressBook.height)){opts.addressBook.dimensions={width:dimension(opts.addressBook.width||400),height:dimension(opts.addressBook.height||260)}}opts.production=typeof opts.production==="boolean"?opts.production:false;opts.openedClass=opts.openedClass||"open";this.config=opts};PayWithAmazon.prototype.init=function(){window.amazon.Login.setClientId(this.config.clientId);var self=this;var pollId=setInterval(poll,200);function poll(){if(!window.OffAmazonPayments.Button)return;clearTimeout(pollId);self.initButton()}};PayWithAmazon.prototype.status=function(){var id=this.billingAgreementId;var consent=this.consent;var status={};if(!id){status.error="Billing agreement ID has not been set."}if(consent!==undefined){status.consent=consent}if(consent===undefined){status.error="Billing consent not yet given."}else if(!consent){status.error="Billing consent not given."}if(!status.error){status.id=id}return status};PayWithAmazon.prototype.check=function(){var status=this.status();if(JSON.stringify(status)!==JSON.stringify(this._status)){this._status=status;this.emit("change",status)}};PayWithAmazon.prototype.initButton=function(){var self=this;var type=this.config.button.type;var color=this.config.button.color;this.widgets.button=new window.OffAmazonPayments.Button(this.config.button.id,this.config.sellerId,{type:type,color:color,authorization:function(){var opts={scope:"profile payments:widget payments:shipping_address",popup:true};window.amazon.Login.authorize(opts,function(res){if(res.error)return self.error(res.error);self.emit("login");self.initAddressBook()})},onError:this.error})};PayWithAmazon.prototype.initAddressBook=function(){var self=this;if(!this.config.addressBook)return this.initWallet();var opts={agreementType:"BillingAgreement",sellerId:this.config.sellerId,onReady:function(ref){self.emit("ready.addressBook");self.setBillingAgreementId(ref)},onAddressSelect:this.initWallet,design:design(this.config.addressBook),onError:this.error};this.widgets.addressBook=new window.OffAmazonPayments.Widgets.AddressBook(opts);this.widgets.addressBook.bind(this.config.addressBook.id);this.opened(this.config.addressBook.id)};PayWithAmazon.prototype.initWallet=function(){var self=this;var opts={amazonBillingAgreementId:this.billingAgreementId,sellerId:this.config.sellerId,design:design(this.config.wallet),onReady:function(ref){self.emit("ready.wallet");if(!self.billingAgreementId){self.setBillingAgreementId(ref)}},onPaymentSelect:function(){self.initConsent();self.check()},onError:this.error};if(!this.billingAgreementId){opts.agreementType="BillingAgreement"}this.widgets.wallet=new window.OffAmazonPayments.Widgets.Wallet(opts);this.widgets.wallet.bind(this.config.wallet.id);this.opened(this.config.wallet.id)};PayWithAmazon.prototype.initConsent=function(){var self=this;var opts={amazonBillingAgreementId:this.billingAgreementId,sellerId:this.config.sellerId,design:design(this.config.consent),onReady:function(consentStatus){self.emit("ready.consent");self.setConsent(consentStatus)},onConsent:this.setConsent,onError:this.error};this.widgets.consent=new window.OffAmazonPayments.Widgets.Consent(opts);this.widgets.consent.bind(this.config.consent.id);this.opened(this.config.consent.id)};PayWithAmazon.prototype.setBillingAgreementId=function(ref){this.billingAgreementId=ref.getAmazonBillingAgreementId();this.check()};PayWithAmazon.prototype.setConsent=function(consentStatus){if(typeof consentStatus.getConsentStatus==="undefined")return;this.consent=consentStatus.getConsentStatus()==="true";this.check()};PayWithAmazon.prototype.opened=function(id){var elem=document.getElementById(id);if(elem)elem.className=elem.className+" "+this.config.openedClass};PayWithAmazon.prototype.error=function(err){var error={code:err.getErrorCode(),message:err.getErrorMessage()};if(console){if(Error.captureStackTrace){Error.captureStackTrace(error,this.error)}console.error(error)}this.emit("error",error)};function dimension(dim){dim=dim+"";return dim+(isNaN(parseInt(dim.charAt(dim.length-1),10))?"":"px")}function design(widget){if(widget.dimensions){return{size:widget.dimensions}}else{return{designMode:"responsive"}}}},{"component/emitter":2,"component/bind":3}],2:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],3:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}]},{},{1:"PayWithAmazon"});