(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;A=window.tu={},o=function(a,b,c){var d,e,f;return f=a+":",d=document.createElement("test"),e=d.style,e.cssText=c?f+b:f+["-webkit-","-moz-","-ms-","-o-",""].join(b+";"+f)+b+";",-1!==e[a].indexOf(b)},w=function(a){var b;return null==a&&(a=!1),b=A.navHeight,A.navHeight=$(".app-message").length&&$("body").hasClass("app-message-visible")?$(".app-message").outerHeight(!0)+$(".app-message").offset().top:$(".navbar").outerHeight(!0),a&&b!==A.navHeight?u():void 0},u=function(){return $(".container").css("padding-top",A.navHeight),$(".date-marker").css("top",A.navHeight+14)},b=function(a){var b,c,d;return c="open"===a?"280px":"0",d=".navbar-default",$(".app-message").length&&$("body").hasClass("app-message-visible")&&(d+=", .app-message"),$(d).animate({left:c},150,function(){return"0"===c?$(d).css("left",""):void 0}),$(".date-marker.fixed").length&&(b=$(".date-marker.fixed").offset().left,c="open"===a?""+(b+280)+"px":""+(b-280)+"px",$(".date-marker.fixed").animate({left:c},150,function(){return $(".date-marker.fixed").css("left","")})),$(window).width()<=540?(c="open"===a?"-280px":"0",$(".btn-submit").animate({right:c},150)):void 0},A.appMessage={paddingChange:A.navHeight-$(".navbar-default").outerHeight(!0),create:function(a,b){var c,d;return null==b&&(b="info"),$(".app-message").text().trim()!==$("<div/>").html(a).text()?(A.appMessage.destroy(),d="content","warning"===b&&(d+=" fa-override-before fa-exclamation-triangle"),"success"===b&&(d+=" fa-override-before fa-check-circle"),c=$('<div class="app-message app-message-'+b+'" style="display: none">\n  <div class="'+d+'">'+a+'</div>\n  <a href="#" class="app-message-close"><i class="fa fa-times-circle icon"></i></a>\n</div>'),$("#page-content").append(c),$(".container").animate({paddingTop:"+="+A.appMessage.paddingChange},150,function(){return $(".app-message").fadeIn(150),$("body").addClass("app-message-visible"),$("body").hasClass("account")?void 0:w(!0)})):void 0},destroy:function(){var a;return a=$(".app-message"),a.fadeOut(150),$(".container").animate({paddingTop:"+=-"+A.appMessage.paddingChange},150,function(){return a.remove(),$("body").removeClass("app-message-visible"),$("body").hasClass("account")?void 0:w(!0)})}},A.inputWarning={create:function(a,b){var c,d,e;return b.addClass("form-group-warning").removeClass("form-group-ok"),b.find(".warning-block").length?(c=b.find(".warning-block"),c.text(a)):(d=b.find(".control-label"),e=$('<div class="warning-block">'+a+"</div>"),b.prepend(e))},destroy:function(a,b){return null==b&&(b=!0),a.removeClass("form-group-warning").find(".warning-block").remove(),b?a.addClass("form-group-ok"):void 0}},n=window.tu.constants={},n.colors={pea:"#9dd767",pea_dark:"#5fac1c",pea_darker:"#417505",salmon:"#fc939e",salmon_dark:"#da6070",salmon_darker:"#d0374b",creamsicle:"#ffbb4e",creamsicle_dark:"#ff8f41",creamsicle_darker:"#f36400",sepia:"#c0bdaf",sepia_dark:"#a19f8b",sepia_darker:"#8a876f",historical:"#c0bdaf",historical_dark:"#a19f8b",historical_darker:"#8a876f",purple:"#b690e2",purple_dark:"#8e69c2",purple_darker:"#7348b0",mint:"#41dab3",mint_dark:"#24b98f",mint_darker:"#1c8e6e",bubblegum:"#f576b5",bubblegum_dark:"#b3487c",bubblegum_darker:"#8f3963",seabreeze:"#44c9d7",seabreeze_dark:"#198a9c",seabreeze_darker:"#126370",dijon:"#e4bf28",dijon_dark:"#c59301",dijon_darker:"#926d01",sandalwood:"#fd8560",sandalwood_dark:"#d13a0a",sandalwood_darker:"#a02c08",caramel:"#dd814b",caramel_dark:"#9e5e14",caramel_darker:"#71430e"},v=function(a,b){return null==a&&(a=!1),null==b&&(b=!1),$(".body-list-show-some").each(function(){var c,d,e;return c=$(this),a&&(c.height(c.height()),c.data("height-closed",c.outerHeight(!0)),c.find(".list-item").show()),null!=c.data("rows")&&null!=c.data("row-height")?(e=c.data("row-padding")?c.data("row-padding"):0,d=c.data("rows")*c.data("row-height")+(c.data("rows")-1)*e):(d=0,c.find(".list-item").each(function(){return d+=$(this).outerHeight(!0)})),c.data("height-open",d),b&&c.hasClass("all-items-visible")?c.height(d):void 0})},t=function(){return $(".date-group").each(function(){return $(this).data("scroll-top",$(this).offset().top),$(this).data("scroll-bottom",$(this).offset().top+$(this).height()-$(this).find(".date-marker").height())})},a=null,s=function(){var b;return $(window).scrollTop()+$(window).height()<=$("body").height()&&(b=!1,$(".date-group").each(function(){var c;return $(this).offset().top<(c=$(window).scrollTop()+A.navHeight)&&c<$(this).data("scroll-bottom")-14?(b=!0,null==a&&(a=$(this)),q($(this)),null==a||$(this).is(a)?void 0:a=$(this)):$(this).find(".date-marker").removeClass("fixed absolute").css("top","")}),null!=a&&!b)?(a.data("scroll-top")<$(window).scrollTop()&&q(a,"absolute"),q(a.prev(),"absolute",!1)):void 0},q=function(a,b,c){var d;return null==b&&(b="fixed"),null==c&&(c=!0),c&&$(".date-marker").removeClass("fixed absolute").css("top",""),d=a.find(".date-marker"),d.addClass(b),"absolute"===b?d.css("top",a.data("scroll-bottom")):void 0},z=null,m=function(a){return z&&clearTimeout(z),z=setTimeout(function(){var b,c;return b=a.parents(".form-group"),1!==(null!=(c=a.val().match(/^[\w]{3,15}$/gi))?c.length:void 0)?A.inputWarning.create("Must be between 3 - 15 unaccented numbers or letters.",b):$.getJSON("user/check.php?un="+encodeURIComponent(a.val()),function(a){return a.available?A.inputWarning.destroy(b):A.inputWarning.create("That URL is already in use. Please try again.",b)})},500)},r=function(a){var b,c,d,e,f;return d=$("#username-length"),b=a.parents(".input-with-domain"),c=b.find(".domain"),d.text(a.val()),e=b.width(),f=d.width(),0===a.val().length?c.hide():(c.show(),e>f+15+110?c.css("left",f+15):c.css("left","6.95em"))},f=function(a,b){var c;return c=!1,null!=a&&""!==a?$.getJSON("user/check-email.php?em="+encodeURIComponent(a),function(a){return a.available&&(c=!0),b(c)}):b(c)},e=function(a){return null!=a.match(/^([0-9a-zA-Z]){12}$/gi)},j=function(a){return null!=a.match(/^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*).{8,}$/gi)},h=function(a){return null!=a.match(/^([a-z0-9_\.\+-]+)@([\da-z\.-]+)\.([a-z\.]{2,8})$/)},y=null,i=function(a){return""!==a.val()?(y&&clearTimeout(y),y=setTimeout(function(){var b;return b=a.parents(".form-group"),j(a.val())?A.inputWarning.destroy(b):A.inputWarning.create("Passwords must be at least 8 characters and contain both numbers and letters.",b)},500)):void 0},k=function(a,b){var c,d,e;if(c=a.find("#control-password-current").parent(),d=a.find("#control-password-new").parent(),e=a.find("#control-password-verify").parent(),A.inputWarning.destroy(c,!1),A.inputWarning.destroy(d,!1),A.inputWarning.destroy(e,!1),a.find("#control-password-current").length&&0!==a.find("#control-password-current").val().length){if(0===a.find("#control-password-new").val().length&&0===a.find("#control-password-verify").val().length)return A.inputWarning.destroy(c),A.inputWarning.create("Please provide a new password in both fields.",d),A.inputWarning.create("Please provide a new password in both fields.",e),b.preventDefault();if(!j(a.find("#control-password-new").val()))return A.inputWarning.destroy(c),A.inputWarning.create("Passwords must be 8+ characters and contain both letters and numbers.",d),b.preventDefault();if(a.find("#control-password-new").val()!==a.find("#control-password-verify").val())return b.preventDefault(),A.inputWarning.destroy(c),A.inputWarning.destroy(d),A.inputWarning.create("The passwords must match.",e)}},x=null,g=function(a){var b;return b=a.val(),""!==a.val()?(x&&clearTimeout(x),x=setTimeout(function(){var b;return b=a.parents(".form-group"),h(a.val())?f(a.val(),function(a){return a?A.inputWarning.destroy(b):A.inputWarning.create("An existing account is using this email address.",b)}):A.inputWarning.create("Please enter a valid email address.",b)},500)):void 0},d=function(a){var b,c;return a.length?(c=a.val().replace(/\s/g,""),b=a.parents(".form-group"),""!==c&&e(c)?(A.inputWarning.destroy(b),!0):(A.inputWarning.create("That code doesnâ€™t seem right. Check it and try again?",b),!1)):void 0},l=function(a){return a.is(":checked")?(a.parent().next(".help-block").remove(),"Please review and agree to the terms of service."===$(".app-message").text().trim()?A.appMessage.destroy():void 0):A.appMessage.create("Please review and agree to the terms of service.","warning")},p=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++){if(b=a[c],""===b.val()||b.parents(".form-group").hasClass("form-group-warning")){b.focus();break}e.push(void 0)}return e},c=function(a){var b;return b=a.siblings("label"),b.animate({top:"50px"},50,function(){return b.css("top","-50px").addClass("with-focus").animate({top:0},100)})},$(function(){return $("#form-register").length&&(p([$("#email"),$("#username"),$("#pwd")]),r($("#username")),$("#username, #pwd, #email").on("blur",function(){return $(this).val().length?$(this).data("do-validate","1").keyup():void 0}).on("keyup",function(){return $(this).val().length>2?$(this).data("do-validate","1"):void 0}).on("keydown",function(){return 0!==$(this).val().length||$(this).siblings("label").hasClass("with-focus")?void 0:c($(this))}).each(function(){return $(this).parents(".form-group-warning").length?$(this).data("do-validate","1").keyup():void 0}),$("#username").on("keyup",function(){return r($(this)),"1"===$(this).data("do-validate")?m($(this)):void 0}),$("#pwd").on("keyup",function(){return"1"===$(this).data("do-validate")?i($(this)):void 0}),$("#email").on("keyup",function(){return"1"===$(this).data("do-validate")?g($(this)):void 0}),$("#terms").on("click",function(){return"1"===$(this).data("do-validate")?l($(this)):void 0})),$("#form-reset").on("submit",function(a){return 0===$(this).find("#password").val().length||0===$(this).find("#password_confirm").val().length?(A.appMessage.create("You must fill in both fields","warning"),a.preventDefault()):j($(this).find("#password").val())?$(this).find("#password").val()!==$(this).find("#password_confirm").val()?(a.preventDefault(),A.appMessage.create("Passwords must match","warning")):A.appMessage.destroy():(A.appMessage.create("Your password must be at least 8 characters, contain both numbers &amp; letters, and omit special characters.","warning"),a.preventDefault())}),$("#form-settings").length&&$("#control-password-current, #control-password-new, #control-password-verify").on("keydown",function(){return 0!==$(this).val().length||$(this).siblings("label").hasClass("with-focus")?void 0:c($(this))}),$("#form-settings").on("submit",function(a){return k($(this),a)}),$(".form-claim-code").on("submit",function(a){return d($(this).find("#claim_code"))?void 0:a.preventDefault()})}),$(function(){var a,c;return v(!0),$(window).load(function(){return t()}),w(),a=!1,c=$.jPanelMenu({openPosition:"280px",keyboardShortcuts:!1,beforeOpen:function(){return b("open")},beforeClose:function(){return b("close")},afterOff:function(){return $(".app-message, .navbar-default").stop(!0,!0).css("left","")}}),$("body").hasClass("menu-open")&&!($(window).width()<820)||$("body").hasClass("menu-off")||($("#page-content").css({minHeight:$(window).height()-A.navHeight}),c.on(),a=!0),$(window).resize(function(){return v(!1,!0),w(!0),!$("body").hasClass("menu-off")&&$("body").hasClass("menu-open")&&$(window).width()<820&&!a&&(c.on(),a=!0),!$("body").hasClass("menu-off")&&$("body").hasClass("menu-open")&&$(window).width()>=820&&a?(c.off(),a=!1):void 0}),$("body").hasClass("insight-stream")&&(o("position","sticky")?$(".date-marker").addClass("sticky"):$(window).scroll(function(){return s()})),$("body").on("click",".share-button-open",function(a){var b,c;return a.preventDefault(),b=$(this).parent(),b.toggleClass("open"),c=b.parent().outerWidth(!0)-b.outerWidth(!0)+4,b.animate({right:c},250)}),$("body").on("click",".share-button-close",function(a){var b;return a.preventDefault(),b=$(this).parent(),b.toggleClass("open"),b.animate({right:"-275px"},250)}),$("body").on("click",".panel-body .btn-see-all",function(){var a,b,c;return a=$(this),b=a.prev(".body-list"),c=b.data(b.hasClass("all-items-visible")?"height-closed":"height-open"),b.animate({height:c},250,function(){var c;return c=a.find(".btn-text").text(),a.find(".btn-text").text(a.data("text")),a.data("text",c),b.toggleClass("all-items-visible"),a.toggleClass("active")})}),$(window).load(function(){return $("body").data("app-message-text")&&A.appMessage.create($("body").data("app-message-text"),$("body").data("app-message-type")),"undefined"!=typeof app_message&&null!==app_message&&null!=app_message.msg&&null!=app_message.type?A.appMessage.create(app_message.msg,app_message.type):void 0}),$("body").on("click","#msg-action",function(a){var b;return a.preventDefault(),b=$(this),null!=b.data("submit-target")?$(b.data("submit-target")).find(".btn-submit").click():void 0}),$("body").on("click",".app-message .app-message-close",function(a){return a.preventDefault(),A.appMessage.destroy()}),$("body").on("click","#btn-claim-code",function(a){return a.preventDefault(),$(".form-claim-code").toggleClass("hidden"),$(this).hide()}),$("body").on("click",".show-section",function(a){var b;return b=$($(this).data("section-selector")),b.length&&(a.preventDefault(),b.length)?b.show():void 0}),$("#form-membership-contact").submit(function(a){var b,c,d;return a.preventDefault(),b=$(this),d=b.find("#control-subject option:selected").text(),"Chooseâ€¦"===d&&(d="ThinkUp Help"),c=b.find("#control-body").val(),window.location.href="mailto:help@thinkup.com?subject="+encodeURI(d)+"&body="+encodeURI(c)}),$("#modal-close-account").on("shown.bs.modal",function(){var a;return a=$(".modal-backdrop").clone(),$(".jPanelMenu-panel").length?($("body > .modal-backdrop").remove(),$(".jPanelMenu-panel").append(a)):void 0}),$("#modal-close-account").on("hidden.bs.modal",function(){return $(".modal-backdrop").remove()})})}).call(this);